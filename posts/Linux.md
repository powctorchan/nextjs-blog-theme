# Linux

## Linux 文件目录

### 目录树架构

所谓目录树架构就是以根目录为主，然后向下呈现分枝状的目录结构。根目录的表示方法为“/”，所有文件都是由根目录衍生出来，且次目录之下还能够有其他数据存在

### 文件系统与目录树的关系（挂载）

所谓挂载就是利用目录当成进入点，将磁盘的分区放在该目录下。这个动作被称为“挂载”进入点的目录称为“挂载点”。

Linux系统中最重要的是根目录，因此根目录一定需要挂载到某个分区

## 使用者与群组

Linux最优秀的地方之一就在于他的多用户多任务环境

### 文件拥有者

由于Linux是个多用户多任务的系统，每个人都有自己工作环境，因此文件拥有者的概念就十分重要，一些文件可以设成“只有文件拥有者才能看、修改文件”这样一来其他用户就无法修改该文件

### 群组

在进行团队开发资源时，设置群组可以使非该群组成员无法访问相关文件

### 其他人

略

***

所以，在Linux里面任何文件都有"User, Group&Other"三种身份的个别权限

但在此之外还有一个root身份，及管理员，拥有最高权限。

***
在Linux系统中，默认的情况下，所有的系统账号和一般使用者的以及root的相关信息都是存在/etc/passwd，个人密码存在/etc/shadow下，群组名称都是记录在/etc/group内

## 文件属性

通过 ls -al 命令则可以看到当前文件的属性，分为7个字段
分别为：

1. 文件类型权限
2. 多少文件名链接到此节点
3. 这个文件或目录的拥有者账号
4. 表示所属群组
5. 为这个文件的容量大小
6. 这个文件创建日期或者时最近修改的日期
7. 文件名

### 权限

共有十个字符  
第一个字符表示这个文件的类型，如：

1. d 为目录
2. - 为文件
3. l 为链接文件
4. b 为设备文件里可供储存的周边设备
5. c 为设备文件里的序列埠设备，如键盘等

接下来的字符三个一组，均为rwx的组合

1. r 可读
2. w 可写
3. x 可执行

若无相关权限则用-占位  
第一组为文件拥有者的权限，第二组为加入此群组的权限，第三组为其他人权限  

## 链接

每个文件会将他的权限记录到文件系统的i-node

## 改变文件属性与权限

1. chgrp：改变文件所属群组
2. chown：改变文件拥有者
3. chmod：改变文件权限

### 改变所属群组

**所改变的群族名要在/etc/group中存在才行，否则将显示错误。**

```linux
chgrp [-R] dirnamej/filename
```

-R:进行递归的持续变更，亦即连同此目录下的所有文件、目录都更新成这个群组之意

### 改变文件拥有者

亦需存在/etc/passwd这个文件中

```linux
chown [-R] 账号名称 文件或目录
chown [-R] 账号名称：群组名称 文件或目录 
```

-R：同上

### 改变权限

Linux 文件的基本权限有九个，分别是owner/group/others的各自的rwx权限  

各权限有自己的赋分，如下：  

- r=4
- w=2
- x=1

所以chmod的语法为：

```linux
chmod [-R] xyz 文件或目录
```

xyz：就是rwx的属性数值相加

如：  
-rwxr-xr--=[4+2+1][4+0+1][4+0+0]=754

## Linux目录配置

依据——FHS标准  
不可变的：/usr  /opt  /etc  /boot
可变的的：/var/mail  /var/news  /var/run  /var/lock

前两个均为可分享的，后两个为不可分享的  
FHS仅定义了以下三层目录定义：

1. /（root，根目录）与开机有关
2. /usr（unix software resourse）与软件安装/执行有关
3. /var（variable）与系统运行有关

***

1. 根目录（/）
根目录是整个系统最重要的一个目录，因为不但所有的目录都是由根目录衍生出来的，同时根目录也与开机、还原、系统修复等操作有关。
因此 FHS 标准建议：根目录（/）所在分区应该越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。如此不但性能较好，根目录所在的文件系统也比较不容易发生问题。
2. 执行文件目录（/bin）
系统有很多放置执行文件的目录，但 /bin 比较特殊。因为 /bin 放置的是在单用户维护模式下还能被操作的命令。在 /bin 下面的命令可以被 root 与一般账号所使用，主要有 cat，chmod，chown，date，mv，mkdir，cp，bash 等常用的命令。
3. 开机文件目录（/boot）
这个目录主要放置开机会使用到的文件，包括 Linux 内核文件以及开机菜单与开机所需配置文件等。
4. 驱动设备目录（/dev）
在 Linux 系统上，任何设备与接口设备都是以文件的形式存在于这个目录当中的。你只要通过访问这个目录下面的某个文件，就等于访问某个设备。比较重要的文件有 /dev/null，/dev/zero，/dev/tty 等。
5. 配置文件目录（/etc）
系统主要的配置文件几乎都放置在这个目录内，例如人员的账号密码文件、各种服务的起始文件等。一般来说，这个目录下的各个文件属性是可以让一般用户查阅的，但只有 root 有权利修改。比较重要的文件有 /etc/init.d，/etc/inittab，/etc/sysconfig 等。
6. 用户主文件夹（/home）
这是系统默认的用户主文件夹（home directory）。在你创建一个一般用户账号时，默认的用户主文件夹都会规范到这里来。~ 代表当前用户的主文件夹。
7. 系统函数库（/lib）
系统的函数库非常多，而 /lib 放置的则是在开机时会用到的函数库，以及在 /bin 或 /sbin 下面的命令会调用的函数库而已。
你可以把函数库想象成是“外挂”，某些命令必须要有这些“外挂”才能够顺利完成程序的执行之意。
8. 媒体设备暂挂区（/media）
media 是“媒体”的英文，顾名思义，这个 /media 下面放置的就是可删除的设备。包括软盘、光盘、DVD等设备都暂时挂载于此。常见的文件名有 /media/floppy，/media/cdrom 等。
9. 额外设备暂挂区（/mnt）
如果你想要暂时挂载某些额外的设备，一般建议你可以放置到这个目录中。在比较早的时候，这个目录的用途与 /media 相同。只是有了 /media 之后，这个目录就被用来暂时挂载用了。
10. 第三方软件安装目录（/opt）
这个目录是用于安装第三方应用程序的，可以由用户自己指定安装位置。当需要卸载第三方应用程序时，可以直接删除安装目录，而不影响系统其它任何设置。
11. 管理员主文件夹（/root）
系统管理员（root）的主文件夹。之所以放在这里，是因为如果进入单用户维护模式而仅挂载根目录时，该目录就能够拥有root的主文件夹，所以我们会希望root的主文件夹与根目录放置在同一个分区中。
12. 重要系统执行文件（/sbin）
Linux 有非常多的命令是来设置系统环境的，这些命令只有 root 才能够利用来“设置”系统，其他用户最多只能用来“查询”而已。放在 /sbin 下面的为开机过程中所需的，里面包括了开机、修复、还原系统所需要的命令。
13. 服务数据存放目录（/srv）
srv 可以视为“service”的缩写，是一些网络服务启动之后，这些服务所需要取用的数据目录。常见的服务例如 WWW、FTP 等。举例来说，WWW 服务需要的网页数据就可以放置在 /srv/www/ 里。
14. 临时文件存放目录（/tmp）
这是让一般用户或者是正在执行的程序暂时放置文件的地方。这个目录是任何人都能够访问，所以你需要定期清理一下。当然，重要数据不可放置在此目录，因为系统会不定期将 /tmp 目录下的数据全部删除。
15. 丢失内容修复目录（/lost+found）
这个目录是使用标准的 ext2/ext3 文件系统格式才会产生的一个目录，目的相当于文件系统发生错误时，将一些丢失的片段放置到这个目录下。这个目录通常会在分区的最顶层存在。
16. 虚拟文件系统目录（/proc）
这个目录本身是一个虚拟文件系统（virtual filesystem）。它放置的数据都是在内存当中，例如系统内核、进程、外部设备以及网络状态等。因为这个目录下的数据都是在内存当中的，所以本身并不占任何硬盘空间。
17. 虚拟文件系统目录（/sys）
这个目录其实跟 /proc 非常类似，也是一个虚拟的文件系统，主要也是记录与内核相关的信息。包括目前已加载的内核模块与内核检测到的硬件设备信息等。这个目录同样不占硬盘容量。
18. 系统软件资源目录（/usr）
很多小白都会误以为 /usr 是 user 的缩写，其实 usr 是 Unix Software Resource 的缩写，也就是 “UNIX 操作系统软件资源” 所放置的目录，而不是用户的数据，这点需要注意。
FHS 建议所有软件开发者应该将他们的数据合理地分别放置到这个目录下的子目录，而不要自行新建该软件的独立目录。
